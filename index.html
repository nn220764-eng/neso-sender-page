<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>Bツール</title>
  <link rel="stylesheet" href="style.css">
  <!-- ethers.js v6 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <h2>Bツール</h2>
    <div id="status" class="status-box">未接続</div>
    <div class="button-group">
      <button id="connectBtn">MetaMask 接続</button>
      <button id="toggleSingleAddBtn" class="toggle-button">単一宛先を追加</button>
      <button id="togglePtDistributeBtn" class="toggle-button pt-button">PT分配</button>
    </div>

    <div id="singleAddSection">
      <h3>単一の宛先を追加</h3>
      <div class="add-form">
        <select id="singleAddressSelect" class="input-field"><option value="">宛先を選択...</option></select>
        <input type="number" id="amountToAdd" placeholder="NESO" class="input-field amount-input">
        <button id="addToListBtn" class="add-button">↓ リストに追加</button>
      </div>
    </div>

    <div id="ptDistributeSection">
      <h3>PT分配ログ</h3>
      <div class="distribute-form">
        <label>参加PTメンバー (複数選択可)</label>
        <select id="partyMembersSelect" class="input-field" multiple size="10"></select>

        <label>分配種別</label>
        <div class="radio-group">
          <label><input type="radio" name="rewardType" value="neso" checked> NESO</label>
          <label><input type="radio" name="rewardType" value="item"> アイテム</label>
        </div>

        <div id="itemDetails">
          <input type="text" id="itemName" placeholder="アイテム名" class="input-field">
          <div class="item-sub-details">
            <input type="number" id="itemPrice" placeholder="アイテム売値 (単価)" class="input-field">
            <input type="number" id="itemQuantity" placeholder="アイテム数量" class="input-field">
          </div>
        </div>

        <div id="nesoDetails"><input type="number" id="rewardNesoAmount" placeholder="NESO総額" class="input-field"></div>
        <button id="addPtRewardBtn" class="add-button">↓ 分配してリストに追加</button> 
      </div>
    </div>

    <h3>送金リスト（1行 = アドレス,NESO）</h3>
    <textarea id="batchList" placeholder="0x宛先アドレス,NESO&#10;0x宛先アドレス,NESO"></textarea>
    <br>
    <button id="sendBtn" class="send-button">複数送金開始</button>

    <pre id="info"></pre>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
